# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2017-02-15 23:16+0100\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=CHARSET\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:3
msgid ""
"Title: Scripts <a class=\"btn btn-lg btn-default\" "
"href=\"packaging_apps_en\">Application packaging</a>"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:5
msgid "## Scripts"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:8
msgid ""
"For now, a YunoHost package must contain five Shell scripts: `install`, "
"`remove`, `upgrade`, `backup` and `restore`.  These scripts will be executed "
"as `admin` on the YunoHost instances."
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:14
msgid "Here is an example: ```bash # Retrieve arguments domain=$1 path=$2"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:20
#, no-wrap
msgid ""
"# Check domain/path availability\n"
"sudo yunohost app checkurl $domain$path -a roundcube\n"
"if [[ ! $? -eq 0 ]]; then\n"
"    exit 1\n"
"fi\n"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:24
msgid ""
"# Generate random DES key & password deskey=$(dd if=/dev/urandom bs=1 "
"count=200 2> /dev/null | tr -c -d '[A-Za-z0-9]' | sed -n "
"'s/\\(.\\{24\\}\\).*/\\1/p')  db_pwd=$(dd if=/dev/urandom bs=1 count=200 2> "
"/dev/null | tr -c -d '[A-Za-z0-9]' | sed -n 's/\\(.\\{24\\}\\).*/\\1/p')"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:27
msgid "# Use 'roundcube' as database name and user db_user=roundcube"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:31
msgid ""
"# Initialize database and store mysql password for upgrade sudo yunohost app "
"initdb $db_user -p $db_pwd -s $(readlink -e "
"../sources/SQL/mysql.initial.sql)  sudo yunohost app setting roundcube "
"mysqlpwd -v $db_pwd"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:39
msgid ""
"# Copy files to the right place final_path=/var/www/roundcube sudo mkdir -p "
"$final_path sudo cp -a ../sources/* $final_path sudo cp ../conf/main.inc.php "
"$final_path/config/ sudo cp ../conf/db.inc.php $final_path/config/ sudo mv "
"$final_path/plugins/managesieve/config.inc.php.dist "
"$final_path/plugins/managesieve/config.inc.php"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:45
msgid ""
"# Change variables in Roundcube configuration sudo sed -i "
"\"s/rcmail-ynhDESkeyTOchange/$deskey/g\" $final_path/config/main.inc.php "
"sudo sed -i \"s/yunouser/$db_user/g\" $final_path/config/db.inc.php sudo sed "
"-i \"s/yunopass/$db_pwd/g\" $final_path/config/db.inc.php sudo sed -i "
"\"s/yunobase/$db_user/g\" $final_path/config/db.inc.php"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:48
msgid "# Set permissions to roundcube directory sudo chown -R www-data: $final_path"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:53
msgid ""
"# Modify Nginx configuration file and copy it to Nginx conf directory sed -i "
"\"s@PATHTOCHANGE@$path@g\" ../conf/nginx.conf sed -i "
"\"s@ALIASTOCHANGE@$final_path/@g\" ../conf/nginx.conf sudo cp "
"../conf/nginx.conf /etc/nginx/conf.d/$domain.d/roundcube.conf"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:58
msgid ""
"# Reload nginx and regenerate SSOwat conf sudo service nginx reload sudo "
"yunohost app ssowatconf ```"
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:61
msgid ""
"### Usage You have to put everything in the `install` script in order to get "
"the app to install without issue. It means that you have to install "
"dependencies, create required repositories, initialize potential databases, "
"copy sources and configure everything in the single `install` script (and of "
"course do the reverse process in the `remove` script)."
msgstr ""

#. type: Plain text
#: /home/jb/Projects/Simon/content/pages/contributor/packaging_apps_scripts.md:62
#, no-wrap
msgid ""
"**Be careful**: for security reasons, the script is executed as the "
"**admin** user in YunoHost. Be sure to test it as **admin** and prepend "
"`sudo` to commands that require it.\n"
msgstr ""
